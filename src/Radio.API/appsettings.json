{
  "$schema": "https://json.schemastore.org/appsettings.json",
  "Serilog": {
    "Using": [ "Serilog.Sinks.File", "Serilog.Sinks.Console" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning",
        "Microsoft.AspNetCore": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console"
      },
      {
        "Name": "File",
        "Args": {
          "path": "./logs/radio-.txt",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 7,
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u3}] [{SourceContext}] {Message:lj}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [ "FromLogContext" ]
  },
  "AllowedHosts": "*",
  "Database": {
    "RootPath": "./data",
    "ConfigurationSubdirectory": "config",
    "ConfigurationFileName": "configuration.db",
    "MetricsSubdirectory": "metrics",
    "MetricsFileName": "metrics.db",
    "FingerprintingSubdirectory": "fingerprints",
    "FingerprintingFileName": "fingerprints.db",
    "BackupSubdirectory": "backups",
    "BackupRetentionDays": 30
  },
  "ManagedConfiguration": {
    "DefaultStoreType": "Sqlite",
    "BasePath": "./config",
    "JsonExtension": ".json",
    "SqliteFileName": "configuration.db",
    "SecretsFileName": "secrets",
    "BackupPath": "./config/backups",
    "AutoSave": true,
    "BackupRetentionDays": 30
  },
  "Metrics": {
    "Enabled": true,
    "FlushIntervalSeconds": 60,
    "DatabasePath": "./data/metrics.db",
    "RetentionMinuteData": 120,
    "RetentionHourData": 48,
    "RetentionDayData": 365,
    "RollupIntervalMinutes": 60
  },
  "Fingerprinting": {
    "Enabled": true,
    "SampleDurationSeconds": 15,
    "IdentificationIntervalSeconds": 30,
    "MinimumConfidenceThreshold": 0.5,
    "DuplicateSuppressionMinutes": 5,
    "DatabasePath": "./data/fingerprints.db",
    "AcoustId": {
      "ApiKey": "",
      "BaseUrl": "https://api.acoustid.org/v2",
      "MaxRequestsPerSecond": 3,
      "TimeoutSeconds": 10
    },
    "MusicBrainz": {
      "BaseUrl": "https://musicbrainz.org/ws/2",
      "ApplicationName": "RadioConsole",
      "ApplicationVersion": "1.0.0",
      "ContactEmail": "",
      "MaxRequestsPerSecond": 1,
      "TimeoutSeconds": 10
    }
  },
  "AudioEngine": {
    "SampleRate": 48000,
    "Channels": 2,
    "BufferSize": 1024,
    "HotPlugIntervalSeconds": 5,
    "OutputBufferSizeSeconds": 5,
    "EnableHotPlugDetection": true
  }
}
